<%- include('partials/header') %>

<main class="container py-5">
  <div class="text-center text-white mb-5">
    <h1 class="fw-bold">Pusat Tugas</h1>
    <p class="text-white-50">Selesaikan tugas untuk mendapatkan Poin.</p>
  </div>

  <div class="row g-4">
    <% if (tasks.length > 0) { %>
      <% tasks.forEach(task => { %>
        <div class="col-md-6 col-lg-4">
          <div class="card bg-dark text-white h-100 shadow rounded-3 border-0">
            <div class="card-body d-flex flex-column">
              <div>
                <h5 class="card-title text-primary fw-bold"><%= task.title %></h5>
                <p class="card-text text-white-50 small"><%= task.description %></p>
              </div>

              <div class="mt-auto">
                <div class="d-flex justify-content-between align-items-center mb-3">
                  <span class="fw-bold fs-5"><%= task.reward.toLocaleString('id-ID') %></span>
                  <span class="badge bg-primary rounded-pill">POIN</span>
                </div>
                
                <form action="/tasks/<%= task.id %>/submit" method="POST">
                  <div class="mb-2">
                    <input type="text" name="proof" class="form-control form-control-sm bg-secondary text-white border-secondary" placeholder="Ketik bukti di sini (cth: username Anda)" required>
                  </div>
                  <button type="submit" class="btn btn-info w-100 fw-bold">
                    <i class="bi bi-send-check me-2"></i> Kirim Bukti
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      <% }) %>
    <% } else { %>
      <div class="col">
        <div class="card bg-dark text-white shadow rounded-3 border-0">
          <div class="card-body text-center p-5">
            <i class="bi bi-clipboard-check fs-1 text-secondary"></i>
            <p class="text-white-50 mt-3">Belum ada tugas yang tersedia.</p>
          </div>
        </div>
      </div>
    <% } %>
  </div>
</main>

<%- include('partials/footer') %>